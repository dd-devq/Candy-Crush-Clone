(()=>{"use strict";var e,t={773:(e,t,i)=>{var s=i(260),l=i.n(s);class r extends Phaser.Scene{constructor(){super({key:"BootScene"})}preload(){this.cameras.main.setBackgroundColor(10016391),this.createLoadingbar(),this.load.on("progress",(e=>{this.progressBar.clear(),this.progressBar.fillStyle(16774867,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)}),this),this.load.on("complete",(()=>{this.progressBar.destroy(),this.loadingBar.destroy()}),this),this.load.pack("preload","./assets/pack.json","preload")}update(){this.scene.start("GameScene")}createLoadingbar(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(6139463,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}const h={score:0,highscore:0,gridWidth:8,gridHeight:8,tileWidth:64,tileHeight:72,candyTypes:["cookie1","cookie2","croissant","cupcake","donut","eclair","macaroon","pie","poptart1","poptart2","starcookie1","starcookie2"]};class o extends Phaser.GameObjects.Image{constructor(e){super(e.scene,e.x,e.y,e.texture,e.frame),this.setOrigin(0,0),this.setInteractive(),this.scene.add.existing(this)}}class d extends Phaser.Scene{constructor(){super({key:"GameScene"})}init(){this.canMove=!0,this.cameras.main.setBackgroundColor(7908062),this.tileGrid=[];for(let e=0;e<h.gridHeight;e++){this.tileGrid[e]=[];for(let t=0;t<h.gridWidth;t++)this.tileGrid[e][t]=this.addTile(t,e)}this.firstSelectedTile=void 0,this.secondSelectedTile=void 0,this.input.on("gameobjectdown",this.tileDown,this),this.checkMatches()}addTile(e,t){const i=h.candyTypes[Phaser.Math.RND.between(0,h.candyTypes.length-1)];return new o({scene:this,x:e*h.tileWidth,y:t*h.tileHeight,texture:i})}tileDown(e,t,i){if(this.canMove)if(this.firstSelectedTile){if(this.secondSelectedTile=t,void 0!==this.secondSelectedTile){const e=Math.abs(this.firstSelectedTile.x-this.secondSelectedTile.x)/h.tileWidth,t=Math.abs(this.firstSelectedTile.y-this.secondSelectedTile.y)/h.tileHeight;(1===e&&0===t||0===e&&1===t)&&(this.canMove=!1,this.swapTiles())}}else this.firstSelectedTile=t}swapTiles(){if(this.firstSelectedTile&&this.secondSelectedTile){const e={x:this.firstSelectedTile.x,y:this.firstSelectedTile.y},t={x:this.secondSelectedTile.x,y:this.secondSelectedTile.y};this.tileGrid[e.y/h.tileHeight][e.x/h.tileWidth]=this.secondSelectedTile,this.tileGrid[t.y/h.tileHeight][t.x/h.tileWidth]=this.firstSelectedTile,this.add.tween({targets:this.firstSelectedTile,x:this.secondSelectedTile.x,y:this.secondSelectedTile.y,ease:"Linear",duration:400,repeat:0,yoyo:!1}),this.add.tween({targets:this.secondSelectedTile,x:this.firstSelectedTile.x,y:this.firstSelectedTile.y,ease:"Linear",duration:400,repeat:0,yoyo:!1,onComplete:()=>{this.checkMatches()}}),this.firstSelectedTile=this.tileGrid[e.y/h.tileHeight][e.x/h.tileWidth],this.secondSelectedTile=this.tileGrid[t.y/h.tileHeight][t.x/h.tileWidth]}}checkMatches(){const e=this.getMatches(this.tileGrid);e.length>0?(this.removeTileGroup(e),this.resetTile(),this.fillTile(),this.tileUp(),this.checkMatches()):(this.swapTiles(),this.tileUp(),this.canMove=!0)}resetTile(){for(let e=this.tileGrid.length-1;e>0;e--)for(let t=this.tileGrid[e].length-1;t>0;t--)if(void 0===this.tileGrid[e][t]&&void 0!==this.tileGrid[e-1][t]){const i=this.tileGrid[e-1][t];this.tileGrid[e][t]=i,this.tileGrid[e-1][t]=void 0,this.add.tween({targets:i,y:h.tileHeight*e,ease:"Linear",duration:200,repeat:0,yoyo:!1}),t=this.tileGrid[e].length}}fillTile(){for(let e=0;e<this.tileGrid.length;e++)for(let t=0;t<this.tileGrid[e].length;t++)if(void 0===this.tileGrid[e][t]){const i=this.addTile(t,e);this.tileGrid[e][t]=i}}tileUp(){this.firstSelectedTile=void 0,this.secondSelectedTile=void 0}removeTileGroup(e){for(let t=0;t<e.length;t++){const i=e[t];for(let e=0;e<i.length;e++){const t=i[e],s=this.getTilePos(this.tileGrid,t);-1!==s.x&&-1!==s.y&&(t.destroy(),this.tileGrid[s.y][s.x]=void 0)}}}getTilePos(e,t){const i={x:-1,y:-1};for(let s=0;s<e.length;s++)for(let l=0;l<e[s].length;l++)if(t===e[s][l]){i.x=l,i.y=s;break}return i}getMatches(e){var t,i,s,l,r,h,o,d;const n=[];let a=[];for(let r=0;r<e.length;r++){const h=e[r];a=[];for(let o=0;o<h.length;o++)if(o<h.length-2&&e[r][o]&&e[r][o+1]&&e[r][o+2]&&(null===(t=e[r][o])||void 0===t?void 0:t.texture.key)===(null===(i=e[r][o+1])||void 0===i?void 0:i.texture.key)&&(null===(s=e[r][o+1])||void 0===s?void 0:s.texture.key)===(null===(l=e[r][o+2])||void 0===l?void 0:l.texture.key)){const t=e[r][o],i=e[r][o+1],s=e[r][o+2];void 0!==t&&void 0!==i&&void 0!==s&&(a.length>0&&-1==a.indexOf(t)&&(n.push(a),a=[]),-1==a.indexOf(t)&&a.push(t),-1==a.indexOf(i)&&a.push(i),-1==a.indexOf(s)&&a.push(s))}a.length>0&&n.push(a)}for(let t=0;t<e.length;t++){const i=e[t];a=[];for(let s=0;s<i.length;s++)if(s<i.length-2&&e[s][t]&&e[s+1][t]&&e[s+2][t]&&(null===(r=e[s][t])||void 0===r?void 0:r.texture.key)===(null===(h=e[s+1][t])||void 0===h?void 0:h.texture.key)&&(null===(o=e[s+1][t])||void 0===o?void 0:o.texture.key)===(null===(d=e[s+2][t])||void 0===d?void 0:d.texture.key)){const i=e[s][t],l=e[s+1][t],r=e[s+2][t];void 0!==i&&void 0!==l&&void 0!==r&&(a.length>0&&-1==a.indexOf(i)&&(n.push(a),a=[]),-1==a.indexOf(i)&&a.push(i),-1==a.indexOf(l)&&a.push(l),-1==a.indexOf(r)&&a.push(r))}a.length>0&&n.push(a)}return n}}const n={title:"Candy crush",version:"2.0",width:520,height:700,type:Phaser.AUTO,parent:"game",scene:[r,d],backgroundColor:"#de3412",render:{pixelArt:!1,antialias:!0}};class a extends l().Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{new a(n)}))}},i={};function s(e){var l=i[e];if(void 0!==l)return l.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,i,l,r)=>{if(!i){var h=1/0;for(a=0;a<e.length;a++){for(var[i,l,r]=e[a],o=!0,d=0;d<i.length;d++)(!1&r||h>=r)&&Object.keys(s.O).every((e=>s.O[e](i[d])))?i.splice(d--,1):(o=!1,r<h&&(h=r));if(o){e.splice(a--,1);var n=l();void 0!==n&&(t=n)}}return t}r=r||0;for(var a=e.length;a>0&&e[a-1][2]>r;a--)e[a]=e[a-1];e[a]=[i,l,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var l,r,[h,o,d]=i,n=0;if(h.some((t=>0!==e[t]))){for(l in o)s.o(o,l)&&(s.m[l]=o[l]);if(d)var a=d(s)}for(t&&t(i);n<h.length;n++)r=h[n],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(a)},i=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var l=s.O(void 0,[216],(()=>s(773)));l=s.O(l)})();